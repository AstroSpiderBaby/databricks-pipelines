# 🔐 Bruce’s Ultimate Databricks Secrets CLI Guide (v0.260.0+)

This guide is tailored for your workspace, secrets, and profiles setup. It covers authentication, profile switching, secret management, and common usage patterns.

---

## 🧭 Authentication & Profiles

### ✅ View Current Auth Info
```bash
databricks auth describe
✅ List Available Profiles
bash
Copy
Edit
databricks auth profiles
🔁 Switch to Another Profile
Option A: One-off usage
bash
Copy
Edit
databricks secrets list-scopes --profile adminspider
Option B: Make profile default for session
Git Bash / Linux / macOS:

bash
Copy
Edit
export DATABRICKS_CONFIG_PROFILE=adminspider
PowerShell:

powershell
Copy
Edit
$env:DATABRICKS_CONFIG_PROFILE = "adminspider"
🔐 Your Secret Scopes
Scope Name	Backend Type	Notes
astro_keyvault	DATABRICKS	Full access
lv426	DATABRICKS	Full access
databricks-secrets-lv426	AZURE_KEYVAULT	Read-only via CLI
jdbc_connection (likely)	DATABRICKS	May exist in adminspider

🔧 Secret Management Commands (CLI v0.200+)
📋 List All Secret Scopes
bash
Copy
Edit
databricks secrets list-scopes
🔑 List All Secrets in a Scope
bash
Copy
Edit
databricks secrets list-secrets astro_keyvault
databricks secrets list-secrets lv426
databricks secrets list-secrets jdbc_connection
➕ Add a New Secret
bash
Copy
Edit
databricks secrets put-secret astro_keyvault my_api_token
❌ Delete a Secret
bash
Copy
Edit
databricks secrets delete-secret lv426 old_db_password
🛠️ Create a New Secret Scope
bash
Copy
Edit
databricks secrets create-scope new_scope_name
🛡️ Manage Access to Secret Scopes (ACLs)
🔍 View ACLs for a Scope
bash
Copy
Edit
databricks secrets list-acls lv426
➕ Add ACL
bash
Copy
Edit
databricks secrets put-acl lv426 --principal Bruce --permission WRITE
❌ Remove ACL
bash
Copy
Edit
databricks secrets delete-acl lv426 --principal Bruce
🧪 Using Secrets in Notebooks
Use dbutils in a Databricks notebook like this:

python
Copy
Edit
dbutils.secrets.get(scope="astro_keyvault", key="api_key")
dbutils.secrets.get(scope="lv426", key="db_password")
dbutils.secrets.get(scope="jdbc_connection", key="jdbc_url")
✅ Pro Tips
Scopes and secrets are workspace-specific

Azure Key Vault scopes are read-only from CLI

Use profiles to manage multiple environments or roles

Use --output json for scripting:

bash
Copy
Edit
databricks secrets list-secrets lv426 --output json
Last updated: July 2025